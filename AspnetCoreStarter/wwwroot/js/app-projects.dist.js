"use strict";var project={load:function(){var e={title:"Project",uri:function(){return"/api/operations/project"},identifier:"Project",type:"Add",fields:project.fvWizardFields(),customFieldMapper:function(e,t){return t}},e=(parameterCtrl.fvWizardAdd(e),{title:"Project",uri:function(){return"/api/operations/project"},identifier:"Project",columns:["id","name","sourceType","destinationType","sourceConnName","destConnName"],customColumnDefs:[{targets:3,searchable:!0,title:"Source Type",orderable:!0,render:function(e,t,a,n){var r="";switch(parseInt(a.projectTypeId)){case 1:r='<span class="badge bg-label-primary">DATABASE</span>';break;case 2:r='<span class="badge bg-label-warning">FILE SOURCE</span>'}return r}},{targets:4,searchable:!0,title:"Destination Type",orderable:!0,render:function(e,t,a,n){var r="";return r=1===parseInt(a.destinationTypeId)?'<span class="badge bg-label-info"> SALESFORCE</span>':r}}]}),e=(parameterCtrl.datatable.loadDataTable(e),$("#dtProject tbody").on("click",".edit-record",function(){var e=$(this).data("id"),t=$("#frmEditProject");$.ajax({url:"/api/operations/project/"+e,type:"GET",contentType:"application/json",success:function(e){project.state.editId=e.id,t.find('input[name="Name"]').val(e.name),t.find('select[name="SfDbMappingId"]').val(e.sfDbMappingId).trigger("change")}})}),{title:function(e){return e.sfConnUrl},template:function(e){return $("<div><strong>"+e.text+'</strong></div><small class="text-sm"><div class="mb-0 alert alert-primary d-flex align-items-center" role="alert"><span class="alert-icon text-primary me-2 p-2"><i class="fa-solid fa-database fa-fw"></i></span>'+$(e.element).data("dbConnString")+'</div> <div class="mt-1 mb-0 alert alert-info d-flex align-items-center" role="alert"><span class="alert-icon text-info me-2 p-2"><i class="fa-brands fa-salesforce fa-fw"></i></span>'+$(e.element).data("sfConnUrl")+"</div></small>")},attributes:[{key:"dbConnString",value:"dbConnString"},{key:"sfConnUrl",value:"sfConnUrl"}]});parameterCtrl.selectAjax({uri:"/api/data/salesforcedbmapping",title:"Salesforce Database Mapping",fields:[{selIdentifier:"#selAddSfDbMapping",resKey:"id",resValue:"name",parentIdentifier:"#mdlAddProject .modal-content",title:e.title,attributes:e.attributes,template:e.template},{selIdentifier:"#selEditSfDbMapping",resKey:"id",resValue:"name",parentIdentifier:"#mdlEditProject .modal-content",title:e.title,attributes:e.attributes,template:e.template}]})},fvWizardFields:function(){return[{generateFormData:!0,postValidate:function(e,t,a,n){var r=parseInt(t.Source),i=(parseInt(t.Destination),""),t="";switch(r){case 1:var i="Database Connection",l={uri:"/api/data/databaseconnection",title:"Database Connection",fields:[{destroyAtStart:!0,selIdentifier:"#selSourceDetails",resKey:"id",resValue:"name",name:"SrcDetails",form:n,parentIdentifier:"#wzdAddProjectForm2",title:(s={title:function(e){return e.connectionString},template:function(e){return $("<div><strong>"+e.text+'</strong></div><small class="text-sm">'+e.title+"</small>")}}).title,template:s.template}]};parameterCtrl.selectAjax(l);break;case 2:var s,l={uri:"/api/data/filesourceconnection",title:i="File Source Connection",fields:[{destroyAtStart:!0,selIdentifier:"#selSourceDetails",resKey:"id",resValue:"name",name:"SrcDetails",form:n,parentIdentifier:"#wzdAddProjectForm2",title:(s={title:function(e){return e.fileLocation},template:function(e){return $("<div><strong>"+e.text+'</strong></div><small class="text-sm">'+e.title+"</small>")}}).title,template:s.template}]};parameterCtrl.selectAjax(l)}t="Salesforce Connection",r={title:function(e){return e.url},template:function(e){return $("<div><strong>"+e.text+'</strong></div><small class="text-sm">'+e.title+"</small>")}},r={uri:"/api/data/salesforceconnection",title:"Salesforce Connection",fields:[{destroyAtStart:!0,selIdentifier:"#selDestDetails",resKey:"id",resValue:"name",name:"DestDetails",form:n,parentIdentifier:"#wzdAddProjectForm2",title:r.title,template:r.template}]};parameterCtrl.selectAjax(r),$("#lblDestDetails").html(t),$("#lblSrcDetails").html(i)},fvFields:{fields:{Name:{validators:{notEmpty:{message:"Please provide the project"}}},Source:{validators:{notEmpty:{message:"Please select a source"}}},Destination:{validators:{notEmpty:{message:"Please select a destination"}}}},plugins:parameterCtrl.fvWizard.plugins()}},{postValidate:function(e,t,a,n){return console.log(t),!0},generateFormData:!0,fvFields:{fields:{SrcDetails:{validators:{callback:{message:"Please choose Source Connection",callback:function(e){return 0<e.value.length}}}},DestDetails:{validators:{callback:{message:"Please choose Destination Connection",callback:function(e){return 0<e.value.length}}}}},plugins:parameterCtrl.fvWizard.plugins()}}]},state:{editId:null,getEditId:function(){return project.state.editId}}};document.addEventListener("DOMContentLoaded",function(e){project.load()});